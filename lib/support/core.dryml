<def tag="do"><tagbody/></def>
<def tag="with"><tagbody/></def>
<def tag="if" attrs="test"><% buffer.lastIf = test; if (buffer.lastIf) { %><tagbody/><% } %></def>
<def tag="else" attrs="test"><% buffer.lastIf = (!buffer.lastIf && (test || test == null)); if (buffer.lastIf) { %><tagbody/><% } %></def>
<def tag="repeat"><if test="%{ this }"><% var i = 0 %><% for (var key in this) { %><do obj="%{ {key: key, value: this[key], i: i++} }"><tagbody/></do><% } %></if></def>